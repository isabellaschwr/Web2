{"ast":null,"code":"var _jsxFileName = \"/Users/isabellaschwarz/Downloads/DHBW/Web Engineering/Web Engineering 2/Web2/frontend/src/components/pages/Review.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { Heading } from \"../common/Heading\";\nimport { getCurrentUsername } from \"../../services/api\"; // lokal gespeicherter Benutzername\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Review = () => {\n  _s();\n  const [bookTitle, setBookTitle] = useState(\"\");\n  const [rating, setRating] = useState(5);\n  const [reviewText, setReviewText] = useState(\"\");\n  const [reviews, setReviews] = useState([]);\n  const [refresh, setRefresh] = useState(false);\n  const username = getCurrentUsername();\n  useEffect(() => {\n    if (bookTitle.trim() !== \"\") {\n      fetch(`http://localhost:8080/reviews/${encodeURIComponent(bookTitle)}`).then(res => res.json()).then(data => setReviews(data)).catch(err => console.error(\"Fehler beim Laden der Reviews:\", err));\n    }\n  }, [bookTitle, refresh]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!username) {\n      alert(\"Bitte zuerst einloggen oder Benutzername setzen.\");\n      return;\n    }\n    const review = {\n      bookTitle,\n      rating,\n      reviewText\n    };\n    try {\n      const res = await fetch(`http://localhost:8080/reviews?username=${username}`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(review)\n      });\n      if (res.ok) {\n        setReviewText(\"\");\n        setRating(5);\n        setRefresh(!refresh);\n      } else {\n        alert(\"Fehler beim Absenden der Review.\");\n      }\n    } catch (error) {\n      console.error(\"Fehler beim Senden:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"review\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(Heading, {\n        title: \" Buch bewerten:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-bar2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: bookTitle,\n          onChange: e => setBookTitle(e.target.value),\n          placeholder: \"Buchtitel eingeben\",\n          className: \"border rounded p-2 w-full mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this), bookTitle && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"reviews\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold mb-2\",\n            children: [\" Reviews zu: '\", bookTitle, \"'\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 15\n          }, this), reviews.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-500\",\n            children: \"Noch keine Bewertungen abgegeben.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"space-y-4\",\n            children: reviews.map(r => {\n              var _r$user;\n              return /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"border p-4 rounded shadow\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-bold\",\n                  children: ((_r$user = r.user) === null || _r$user === void 0 ? void 0 : _r$user.username) || \"Unbekannt\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 80,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"\\u2B50 \", r.rating, \"/5\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 81,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: r.reviewText\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 82,\n                  columnNumber: 23\n                }, this)]\n              }, r.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 21\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), bookTitle && /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"border p-4 rounded shadow mt-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold mb-2\",\n          children: \" Review schreiben\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block mb-2\",\n          children: \"Bewertung (1\\u20135 Sterne):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: rating,\n          onChange: e => setRating(Number(e.target.value)),\n          className: \"border p-2 w-full mb-4 rounded\",\n          children: [1, 2, 3, 4, 5].map(n => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: n,\n            children: n\n          }, n, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: reviewText,\n          onChange: e => setReviewText(e.target.value),\n          placeholder: \"Ihre Meinung zum Buch...\",\n          className: \"border p-2 w-full rounded mb-4\",\n          rows: 4,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",\n          children: \"Bewertung absenden\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n};\n_s(Review, \"LYTEVAXtn8/lOZWsWn/liVszPXc=\");\n_c = Review;\nvar _c;\n$RefreshReg$(_c, \"Review\");","map":{"version":3,"names":["React","useEffect","useState","Heading","getCurrentUsername","jsxDEV","_jsxDEV","Review","_s","bookTitle","setBookTitle","rating","setRating","reviewText","setReviewText","reviews","setReviews","refresh","setRefresh","username","trim","fetch","encodeURIComponent","then","res","json","data","catch","err","console","error","handleSubmit","e","preventDefault","alert","review","method","headers","body","JSON","stringify","ok","className","children","title","fileName","_jsxFileName","lineNumber","columnNumber","type","value","onChange","target","placeholder","length","map","r","_r$user","user","id","onSubmit","Number","n","rows","required","_c","$RefreshReg$"],"sources":["/Users/isabellaschwarz/Downloads/DHBW/Web Engineering/Web Engineering 2/Web2/frontend/src/components/pages/Review.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Heading } from \"../common/Heading\";\nimport { getCurrentUsername } from \"../../services/api\"; // lokal gespeicherter Benutzername\n\nexport const Review = () => {\n  const [bookTitle, setBookTitle] = useState(\"\");\n  const [rating, setRating] = useState(5);\n  const [reviewText, setReviewText] = useState(\"\");\n  const [reviews, setReviews] = useState([]);\n  const [refresh, setRefresh] = useState(false);\n\n  const username = getCurrentUsername();\n\n  useEffect(() => {\n    if (bookTitle.trim() !== \"\") {\n      fetch(`http://localhost:8080/reviews/${encodeURIComponent(bookTitle)}`)\n        .then((res) => res.json())\n        .then((data) => setReviews(data))\n        .catch((err) => console.error(\"Fehler beim Laden der Reviews:\", err));\n    }\n  }, [bookTitle, refresh]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!username) {\n      alert(\"Bitte zuerst einloggen oder Benutzername setzen.\");\n      return;\n    }\n\n    const review = {\n      bookTitle,\n      rating,\n      reviewText,\n    };\n\n    try {\n      const res = await fetch(`http://localhost:8080/reviews?username=${username}`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(review),\n      });\n\n      if (res.ok) {\n        setReviewText(\"\");\n        setRating(5);\n        setRefresh(!refresh);\n      } else {\n        alert(\"Fehler beim Absenden der Review.\");\n      }\n    } catch (error) {\n      console.error(\"Fehler beim Senden:\", error);\n    }\n  };\n\n  return (\n    <section className=\"review\">\n      <div className=\"container\">\n        <Heading title=\" Buch bewerten:\" />\n\n        <div className=\"search-bar2\">\n          <input\n            type=\"text\"\n            value={bookTitle}\n            onChange={(e) => setBookTitle(e.target.value)}\n            placeholder=\"Buchtitel eingeben\"\n            className=\"border rounded p-2 w-full mb-4\"\n          />\n\n          {bookTitle && (\n            <div className=\"reviews\">\n              <h2 className=\"text-xl font-semibold mb-2\"> Reviews zu: '{bookTitle}'</h2>\n              {reviews.length === 0 ? (\n                <p className=\"text-gray-500\">Noch keine Bewertungen abgegeben.</p>\n              ) : (\n                <ul className=\"space-y-4\">\n                  {reviews.map((r) => (\n                    <li key={r.id} className=\"border p-4 rounded shadow\">\n                      <div className=\"font-bold\">{r.user?.username || \"Unbekannt\"}</div>\n                      <div>⭐ {r.rating}/5</div>\n                      <p>{r.reviewText}</p>\n                    </li>\n                  ))}\n                </ul>\n              )}\n            </div>\n          )}\n        </div>\n\n        {bookTitle && (\n          <form onSubmit={handleSubmit} className=\"border p-4 rounded shadow mt-6\">\n            <h3 className=\"text-lg font-semibold mb-2\"> Review schreiben</h3>\n\n            <label className=\"block mb-2\">Bewertung (1–5 Sterne):</label>\n            <select\n              value={rating}\n              onChange={(e) => setRating(Number(e.target.value))}\n              className=\"border p-2 w-full mb-4 rounded\"\n            >\n              {[1, 2, 3, 4, 5].map((n) => (\n                <option key={n} value={n}>\n                  {n}\n                </option>\n              ))}\n            </select>\n\n            <textarea\n              value={reviewText}\n              onChange={(e) => setReviewText(e.target.value)}\n              placeholder=\"Ihre Meinung zum Buch...\"\n              className=\"border p-2 w-full rounded mb-4\"\n              rows={4}\n              required\n            />\n\n            <button\n              type=\"submit\"\n              className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n            >\n              Bewertung absenden\n            </button>\n          </form>\n        )}\n      </div>\n    </section>\n  );\n};\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}